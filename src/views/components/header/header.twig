<header class="store-header">
  {# Top Nav #}
  <div class="top-navbar">
    <div class="container flex justify-between">
      <div class="flex-1 flex items-center gap-2">
        {# Footer Menu #}
        {% if important_links %}
          <salla-menu source="footer" topnav></salla-menu>
        {% endif %}

        {# Language & Currency Component #}
        <div class="header-buttons">
          {% if store.settings.is_multilingual or store.settings.currencies_enabled %}
            <button type="button" onclick="salla.event.dispatch('localization::open')" class="btn--rounded-gray basis-0">
              <span class="flag iti__flag iti__{{ user.language.country_code }} rounded-sm"></span>
              <span class="mx-1.5">|</span> <span>{{ currency.symbol }}</span>
            </button>
            <salla-localization-modal></salla-localization-modal>
          {% endif %}
        </div>

        {# Scopes | Branches #}
        {% if store.scope %}
          <button class="btn--rounded-gray"
                  onclick="salla.event.dispatch('scopes::open', {'mode': 'default'})">
            <i class="sicon-location rtl:ml-1 ltr:mr-1"></i> {{ store.scope.name }}
          </button>
        {% endif %}

        {# Theme Toggle Button #}
        <button title="Toggle Theme" class="theme-mode-btn" id="theme-toggle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path class="moon-icon" d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            <circle class="sun-icon" cx="12" cy="12" r="5"></circle>
            <line class="sun-rays-icon" x1="12" y1="1" x2="12" y2="3"></line>
            <line class="sun-rays-icon bottom" x1="12" y1="21" x2="12" y2="23"></line>
            <line class="sun-rays-icon" x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line class="sun-rays-icon bottom" x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line class="sun-rays-icon" x1="1" y1="12" x2="3" y2="12"></line>
            <line class="sun-rays-icon bottom" x1="21" y1="12" x2="23" y2="12"></line>
          </svg>
        </button>

      </div>
    </div>
  </div>
</header>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const themeToggleButton = document.getElementById('theme-toggle');
    const currentTheme = localStorage.getItem('theme') || 'light';

    // Apply current theme
    document.body.setAttribute('data-theme', currentTheme);

    // Update button icon based on current theme
    updateIcon(currentTheme);

    themeToggleButton.addEventListener('click', function() {
      let newTheme = document.body.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
      document.body.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateIcon(newTheme);
    });

    function updateIcon(theme) {
      if (theme === 'dark') {
        themeToggleButton.setAttribute('aria-label', 'Switch to light theme');
        // Add any additional styling or class changes for dark theme
      } else {
        themeToggleButton.setAttribute('aria-label', 'Switch to dark theme');
        // Add any additional styling or class changes for light theme
      }
    }
  });
</script>
